{% extends "base.html" %}

{% block title %}Upload Prescription - AI Prescription Assistant{% endblock %}

{% block content %}
<div class="card">
    <h2>Upload Prescription</h2>

    <form method="POST" enctype="multipart/form-data" id="upload-form">
        <div class="upload-area" onclick="document.getElementById('prescription_image').click()">
            <p style="font-size: 1.2em; color: #667eea;">üìÑ Click to select or drag and drop prescription image</p>
            <p style="font-size: 0.9em; color: #666;">Supported formats: JPG, PNG, WEBP (Max 16MB)</p>
        </div>

        <input type="file" name="prescription_image" id="prescription_image" accept="image/*" required
            style="display: none;">

        <div class="form-group" style="margin-top: 20px;">
            <label for="patient_name">Patient Name (Optional):</label>
            <input type="text" name="patient_name" id="patient_name" placeholder="Enter patient name">
        </div>

        <div class="form-group"
            style="margin-top: 20px; background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107;">
            <label style="display: flex; align-items: center; cursor: pointer;">
                <input type="checkbox" name="handwriting_mode" id="handwriting_mode"
                    style="width: auto; margin-right: 10px;">
                <div>
                    <strong>üñäÔ∏è Handwriting Mode (Messy/Cursive Prescriptions)</strong>
                    <p style="margin: 5px 0 0 0; font-size: 0.9em; color: #856404;">
                        Enable for handwritten prescriptions with cursive writing, low contrast, or faint ink.
                        Uses aggressive preprocessing (3x resize, CLAHE, deskew) and lenient parsing rules.
                    </p>
                </div>
            </label>
        </div>

        <button type="submit" class="btn btn-primary">Upload and Process</button>
        <a href="/" class="btn btn-secondary">Cancel</a>
    </form>
</div>
{% endblock %}